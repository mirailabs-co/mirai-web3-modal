{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _class;\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { BaseHttpService } from './http-base';\nconst PAIRING_URL = 'https://dev-sign-provider.miraiid.io';\nclass MiraiIDAPI extends BaseHttpService {\n  constructor() {\n    super(PAIRING_URL);\n  }\n  async getPairingUri(namespace, chains, accessToken) {\n    return this.sendPost('api/provider', {\n      chainIds: chains.map(chainId => {\n        return \"\".concat(namespace, \":\").concat(Number(parseInt(chainId, 16)));\n      })\n    }, {\n      'Authorization': \"Bearer \".concat(accessToken)\n    });\n  }\n  async sendRequest(wcTopicId, requestDTO, accessToken) {\n    return this.sendPut(\"api/provider/send-request/\".concat(wcTopicId), _objectSpread({}, requestDTO), {\n      'Authorization': \"Bearer \".concat(accessToken)\n    });\n  }\n}\n_class = MiraiIDAPI;\n_defineProperty(MiraiIDAPI, \"INSTANCE\", new _class());\nexport { MiraiIDAPI };","map":{"version":3,"names":["BaseHttpService","PAIRING_URL","MiraiIDAPI","constructor","getPairingUri","namespace","chains","accessToken","sendPost","chainIds","map","chainId","concat","Number","parseInt","sendRequest","wcTopicId","requestDTO","sendPut","_objectSpread","_class","_defineProperty"],"sources":["/Users/phuocnd/phuocnd/works/mirai/miraiidjs/src/sign-provider/transports/http/http-miraiid.ts"],"sourcesContent":["import { SendRequestDTO } from '../request.dtos/SendRequestDTO';\nimport { BaseHttpService } from './http-base';\n\nconst PAIRING_URL: string = 'https://dev-sign-provider.miraiid.io';\n\nclass MiraiIDAPI extends BaseHttpService {\n\tpublic static readonly INSTANCE = new MiraiIDAPI();\n\n\tprivate constructor() {\n\t\tsuper(PAIRING_URL);\n\t}\n\n\tasync getPairingUri(namespace: string, chains: string[], accessToken: string): Promise<string> {\n\t\treturn this.sendPost<string>(\n\t\t\t'api/provider',\n\t\t\t{\n\t\t\t\tchainIds: chains.map((chainId: string) => {\n\t\t\t\t\treturn `${namespace}:${Number(parseInt(chainId, 16))}`;\n\t\t\t\t}),\n\t\t\t},\n\t\t\t{ 'Authorization': `Bearer ${accessToken}` },\n\t\t);\n\t}\n\n\tasync sendRequest<T>(wcTopicId: string, requestDTO: SendRequestDTO, accessToken: string): Promise<T> {\n\t\treturn this.sendPut<string>(\n\t\t\t`api/provider/send-request/${wcTopicId}`,\n\t\t\t{\n\t\t\t\t...requestDTO,\n\t\t\t},\n\t\t\t{ 'Authorization': `Bearer ${accessToken}` },\n\t\t) as T;\n\t}\n}\n\nexport { MiraiIDAPI };\n"],"mappings":";;;;AACA,SAASA,eAAe,QAAQ,aAAa;AAE7C,MAAMC,WAAmB,GAAG,sCAAsC;AAElE,MAAMC,UAAU,SAASF,eAAe,CAAC;EAGhCG,WAAWA,CAAA,EAAG;IACrB,KAAK,CAACF,WAAW,CAAC;EACnB;EAEA,MAAMG,aAAaA,CAACC,SAAiB,EAAEC,MAAgB,EAAEC,WAAmB,EAAmB;IAC9F,OAAO,IAAI,CAACC,QAAQ,CACnB,cAAc,EACd;MACCC,QAAQ,EAAEH,MAAM,CAACI,GAAG,CAAEC,OAAe,IAAK;QACzC,UAAAC,MAAA,CAAUP,SAAS,OAAAO,MAAA,CAAIC,MAAM,CAACC,QAAQ,CAACH,OAAO,EAAE,EAAE,CAAC,CAAC;MACrD,CAAC;IACF,CAAC,EACD;MAAE,eAAe,YAAAC,MAAA,CAAYL,WAAW;IAAG,CAC5C,CAAC;EACF;EAEA,MAAMQ,WAAWA,CAAIC,SAAiB,EAAEC,UAA0B,EAAEV,WAAmB,EAAc;IACpG,OAAO,IAAI,CAACW,OAAO,8BAAAN,MAAA,CACWI,SAAS,GAAAG,aAAA,KAElCF,UAAU,GAEd;MAAE,eAAe,YAAAL,MAAA,CAAYL,WAAW;IAAG,CAC5C,CAAC;EACF;AACD;AAACa,MAAA,GA5BKlB,UAAU;AAAAmB,eAAA,CAAVnB,UAAU,cACmB,IAAIA,MAAU,CAAC,CAAC;AA6BnD,SAASA,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}