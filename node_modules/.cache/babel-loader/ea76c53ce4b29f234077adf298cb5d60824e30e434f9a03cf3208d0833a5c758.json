{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { io } from 'socket.io-client';\nimport { WebSocketConnection } from './connection-wrapper';\nimport { BaseWebSocketService } from './ws-base';\nexport class SignerWebSocketService extends BaseWebSocketService {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"establish\", async acknowledgement => {\n      const headers = await this.getHeaders();\n      const socket = io('ws://localhost:3000', {\n        // const socket = io(`${'wss://id-api-dev.mirailabs.co/mpc'}`, {\n        autoConnect: false,\n        reconnection: false,\n        transportOptions: {\n          websocket: {\n            extraHeaders: headers\n          }\n        },\n        transports: ['websocket'],\n        extraHeaders: headers\n      });\n      return new WebSocketConnection(socket, acknowledgement);\n    });\n  }\n}","map":{"version":3,"names":["io","WebSocketConnection","BaseWebSocketService","SignerWebSocketService","constructor","arguments","_defineProperty","acknowledgement","headers","getHeaders","socket","autoConnect","reconnection","transportOptions","websocket","extraHeaders","transports"],"sources":["/Users/phuocnd/phuocnd/works/mirai/miraiidjs/src/sign-provider/transports/websocket/ws-signer.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { io } from 'socket.io-client';\nimport { WebSocketConnection } from './connection-wrapper';\nimport { BaseWebSocketService } from './ws-base';\n\nexport class SignerWebSocketService extends BaseWebSocketService {\n\tpublic establish = async (acknowledgement?: boolean): Promise<WebSocketConnection> => {\n\t\tconst headers = await this.getHeaders();\n\n\t\tconst socket = io(`${'ws://localhost:3000'}`, {\n\t\t\t// const socket = io(`${'wss://id-api-dev.mirailabs.co/mpc'}`, {\n\t\t\tautoConnect: false,\n\t\t\treconnection: false,\n\t\t\ttransportOptions: {\n\t\t\t\twebsocket: {\n\t\t\t\t\textraHeaders: headers,\n\t\t\t\t},\n\t\t\t},\n\t\t\ttransports: ['websocket'],\n\t\t\textraHeaders: headers,\n\t\t});\n\n\t\treturn new WebSocketConnection(socket, acknowledgement);\n\t};\n}\n"],"mappings":";AAAA;AACA,SAASA,EAAE,QAAQ,kBAAkB;AACrC,SAASC,mBAAmB,QAAQ,sBAAsB;AAC1D,SAASC,oBAAoB,QAAQ,WAAW;AAEhD,OAAO,MAAMC,sBAAsB,SAASD,oBAAoB,CAAC;EAAAE,YAAA;IAAA,SAAAC,SAAA;IAAAC,eAAA,oBAC7C,MAAOC,eAAyB,IAAmC;MACrF,MAAMC,OAAO,GAAG,MAAM,IAAI,CAACC,UAAU,CAAC,CAAC;MAEvC,MAAMC,MAAM,GAAGV,EAAE,CAAI,qBAAqB,EAAI;QAC7C;QACAW,WAAW,EAAE,KAAK;QAClBC,YAAY,EAAE,KAAK;QACnBC,gBAAgB,EAAE;UACjBC,SAAS,EAAE;YACVC,YAAY,EAAEP;UACf;QACD,CAAC;QACDQ,UAAU,EAAE,CAAC,WAAW,CAAC;QACzBD,YAAY,EAAEP;MACf,CAAC,CAAC;MAEF,OAAO,IAAIP,mBAAmB,CAACS,MAAM,EAAEH,eAAe,CAAC;IACxD,CAAC;EAAA;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}