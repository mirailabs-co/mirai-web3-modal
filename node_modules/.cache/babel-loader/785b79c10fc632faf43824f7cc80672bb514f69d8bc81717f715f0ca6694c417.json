{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nexport class ServiceQueryRequest {\n  constructor(url, params) {\n    _defineProperty(this, \"_url\", void 0);\n    _defineProperty(this, \"_params\", void 0);\n    this._url = url;\n    this._params = params;\n  }\n  addParam(key, value) {\n    key = encodeURIComponent(key);\n    value = encodeURIComponent(value);\n\n    // kvp looks like ['key1=value1', 'key2=value2', ...]\n    var kvp = this._params.split('&');\n    kvp = kvp.filter(e => e !== '');\n    let i = 0;\n    for (; i < kvp.length; i++) {\n      if (kvp[i].startsWith(key + '=')) {\n        let pair = kvp[i].split('=');\n        pair[1] = value;\n        kvp[i] = pair.join('=');\n        break;\n      }\n    }\n    if (i >= kvp.length) {\n      kvp[kvp.length] = [key, value].join('=');\n    }\n    if (kvp.length === 1) {\n      let params = kvp[0];\n      this._params = params;\n      return;\n    }\n\n    // can return this or...\n    let params = kvp.join('&');\n    this._params = params;\n  }\n  toUri() {\n    return this._url + '?' + this._params;\n  }\n}","map":{"version":3,"names":["ServiceQueryRequest","constructor","url","params","_defineProperty","_url","_params","addParam","key","value","encodeURIComponent","kvp","split","filter","e","i","length","startsWith","pair","join","toUri"],"sources":["/Users/phuocnd/phuocnd/works/mirai/miraiidjs/src/shared/utils/service-query-request.ts"],"sourcesContent":["import _ from 'lodash';\n\nexport class ServiceQueryRequest {\n\tprivate _url: string;\n\tprivate _params: string;\n\n\tconstructor(url: string, params: string) {\n\t\tthis._url = url;\n\t\tthis._params = params;\n\t}\n\n\taddParam(key: string, value: string) {\n\t\tkey = encodeURIComponent(key);\n\t\tvalue = encodeURIComponent(value);\n\n\t\t// kvp looks like ['key1=value1', 'key2=value2', ...]\n\t\tvar kvp = this._params.split('&');\n\n\t\tkvp = kvp.filter((e) => e !== '');\n\n\t\tlet i = 0;\n\n\t\tfor (; i < kvp.length; i++) {\n\t\t\tif (kvp[i].startsWith(key + '=')) {\n\t\t\t\tlet pair = kvp[i].split('=');\n\t\t\t\tpair[1] = value;\n\t\t\t\tkvp[i] = pair.join('=');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (i >= kvp.length) {\n\t\t\tkvp[kvp.length] = [key, value].join('=');\n\t\t}\n\n\t\tif (kvp.length === 1) {\n\t\t\tlet params = kvp[0];\n\t\t\tthis._params = params;\n\t\t\treturn;\n\t\t}\n\n\t\t// can return this or...\n\t\tlet params = kvp.join('&');\n\t\tthis._params = params;\n\t}\n\n\ttoUri() {\n\t\treturn this._url + '?' + this._params;\n\t}\n}\n"],"mappings":";AAEA,OAAO,MAAMA,mBAAmB,CAAC;EAIhCC,WAAWA,CAACC,GAAW,EAAEC,MAAc,EAAE;IAAAC,eAAA;IAAAA,eAAA;IACxC,IAAI,CAACC,IAAI,GAAGH,GAAG;IACf,IAAI,CAACI,OAAO,GAAGH,MAAM;EACtB;EAEAI,QAAQA,CAACC,GAAW,EAAEC,KAAa,EAAE;IACpCD,GAAG,GAAGE,kBAAkB,CAACF,GAAG,CAAC;IAC7BC,KAAK,GAAGC,kBAAkB,CAACD,KAAK,CAAC;;IAEjC;IACA,IAAIE,GAAG,GAAG,IAAI,CAACL,OAAO,CAACM,KAAK,CAAC,GAAG,CAAC;IAEjCD,GAAG,GAAGA,GAAG,CAACE,MAAM,CAAEC,CAAC,IAAKA,CAAC,KAAK,EAAE,CAAC;IAEjC,IAAIC,CAAC,GAAG,CAAC;IAET,OAAOA,CAAC,GAAGJ,GAAG,CAACK,MAAM,EAAED,CAAC,EAAE,EAAE;MAC3B,IAAIJ,GAAG,CAACI,CAAC,CAAC,CAACE,UAAU,CAACT,GAAG,GAAG,GAAG,CAAC,EAAE;QACjC,IAAIU,IAAI,GAAGP,GAAG,CAACI,CAAC,CAAC,CAACH,KAAK,CAAC,GAAG,CAAC;QAC5BM,IAAI,CAAC,CAAC,CAAC,GAAGT,KAAK;QACfE,GAAG,CAACI,CAAC,CAAC,GAAGG,IAAI,CAACC,IAAI,CAAC,GAAG,CAAC;QACvB;MACD;IACD;IAEA,IAAIJ,CAAC,IAAIJ,GAAG,CAACK,MAAM,EAAE;MACpBL,GAAG,CAACA,GAAG,CAACK,MAAM,CAAC,GAAG,CAACR,GAAG,EAAEC,KAAK,CAAC,CAACU,IAAI,CAAC,GAAG,CAAC;IACzC;IAEA,IAAIR,GAAG,CAACK,MAAM,KAAK,CAAC,EAAE;MACrB,IAAIb,MAAM,GAAGQ,GAAG,CAAC,CAAC,CAAC;MACnB,IAAI,CAACL,OAAO,GAAGH,MAAM;MACrB;IACD;;IAEA;IACA,IAAIA,MAAM,GAAGQ,GAAG,CAACQ,IAAI,CAAC,GAAG,CAAC;IAC1B,IAAI,CAACb,OAAO,GAAGH,MAAM;EACtB;EAEAiB,KAAKA,CAAA,EAAG;IACP,OAAO,IAAI,CAACf,IAAI,GAAG,GAAG,GAAG,IAAI,CAACC,OAAO;EACtC;AACD"},"metadata":{},"sourceType":"module","externalDependencies":[]}