{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport { AuthToken } from '../../../auth-client';\nexport class BaseWebSocketService {\n  constructor(opts) {\n    _defineProperty(this, \"getHeaders\", async () => {\n      const authHeaders = {};\n      const token = await AuthToken.get();\n      if (token) {\n        authHeaders.Authorization = \"Bearer \".concat(token.access_token);\n      }\n      return authHeaders;\n    });\n    this.initialize();\n  }\n  initialize() {\n    try {\n      AuthToken.initInstanceStorage();\n    } catch {}\n  }\n}","map":{"version":3,"names":["AuthToken","BaseWebSocketService","constructor","opts","_defineProperty","authHeaders","token","get","Authorization","concat","access_token","initialize","initInstanceStorage"],"sources":["/Users/phuocnd/phuocnd/works/mirai/miraiidjs/src/sign-provider/transports/websocket/ws-base.ts"],"sourcesContent":["import { AuthToken } from '../../../auth-client';\nimport { WebSocketConnection } from './connection-wrapper';\n\nexport type IWSOpts = {\n\turl: string;\n};\n\nexport abstract class BaseWebSocketService {\n\tconstructor(opts: IWSOpts) {\n\t\tthis.initialize();\n\t}\n\n\tinitialize() {\n\t\ttry {\n\t\t\tAuthToken.initInstanceStorage();\n\t\t} catch {}\n\t}\n\tprotected getHeaders = async () => {\n\t\tconst authHeaders: Record<string, string> = {};\n\n\t\tconst token = await AuthToken.get();\n\t\tif (token) {\n\t\t\tauthHeaders.Authorization = `Bearer ${token.access_token}`;\n\t\t}\n\n\t\treturn authHeaders;\n\t};\n\n\tpublic abstract establish(): Promise<WebSocketConnection>;\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,sBAAsB;AAOhD,OAAO,MAAeC,oBAAoB,CAAC;EAC1CC,WAAWA,CAACC,IAAa,EAAE;IAAAC,eAAA,qBASJ,YAAY;MAClC,MAAMC,WAAmC,GAAG,CAAC,CAAC;MAE9C,MAAMC,KAAK,GAAG,MAAMN,SAAS,CAACO,GAAG,CAAC,CAAC;MACnC,IAAID,KAAK,EAAE;QACVD,WAAW,CAACG,aAAa,aAAAC,MAAA,CAAaH,KAAK,CAACI,YAAY,CAAE;MAC3D;MAEA,OAAOL,WAAW;IACnB,CAAC;IAjBA,IAAI,CAACM,UAAU,CAAC,CAAC;EAClB;EAEAA,UAAUA,CAAA,EAAG;IACZ,IAAI;MACHX,SAAS,CAACY,mBAAmB,CAAC,CAAC;IAChC,CAAC,CAAC,MAAM,CAAC;EACV;AAaD"},"metadata":{},"sourceType":"module","externalDependencies":[]}